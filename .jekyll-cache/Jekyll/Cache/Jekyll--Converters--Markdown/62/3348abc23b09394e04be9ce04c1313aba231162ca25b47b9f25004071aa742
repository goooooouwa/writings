I"n<h1 id="story-template-consumer-view-health-status-of-thoughtapi">Story template: Consumer: view health status of ThoughtAPI</h1>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>h2. Business Value
*As a* Consumer/Publisher/Cons-admin/Pub-admin,
*I want to* view health status metrics of ThoughtAPI,
*So that* I know the reliability of ThoughtAPI.

h2. User Journey
https://docs.google.com/presentation/d/1bZWhO-byImuy7emHsolzb5VyVK5SBt6UtVz2WvsDc70/edit#slide=id.g1c9ca5108_1270

h2. Common Knowledge
# *Role &amp; Permission*: if not explicitly described otherwise, every functionality works the same for all user roles having permission using it. See [Permission lookup table|https://docs.google.com/spreadsheets/d/1cgtcZwBf59Yr7XZtCt_aLGcfM36Ek-BPc-6uJaLrMH0/edit#gid=0] for details.
# *Page Routing*: please follow [Page Routing Principles|https://docs.google.com/spreadsheets/d/1jYxtXSqwOxl3BY0v9iEs8GNMfu70hOXeDIqyvy-R-c8/edit#gid=501674950] if a page routing error occurs.
# *Security*: must follow [Security Guidelines|https://docs.google.com/spreadsheets/d/16rBYvFsEvN6ewTS3V4eQrCyeiifS1iw8HqDRobIXGgA/edit#gid=0].

h2. Acceptance Criteria

+AC Consumer can see all time in UTC+0 format in status page+
GIVEN Ling in ThoughtAPI status page,
THEN she can see all time in status page are in UTC+0 format.

+AC Consumer can see Current Health Status of ThoughtAPI+
GIVEN Ling in ThoughtAPI status page,
THEN she can see Current Health Status (see UI Spec) of ThoughtAPI.

+AC Consumer can interact with Current Health Status of ThoughtAPI+
GIVEN Ling in ThoughtAPI status page,
WHEN she interact (see UI Spec) with Current Health Status of ThoughtAPI,
THEN she can see Current Health Status of ThoughtAPI behave as defined in UI Spec.

+AC Consumer can see Health Status History Graph of ThoughtAPI+
GIVEN Ling in ThoughtAPI status page,
THEN she can see Health Status History Graph (see UI Spec) of ThoughtAPI.

+AC Consumer can interact with Health Status History Graph of ThoughtAPI+
GIVEN Ling in ThoughtAPI status page,
WHEN she interact (see UI Spec) with Health Status History Graph of ThoughtAPI,
THEN she can see Health Status History Graph of ThoughtAPI behave as defined in UI Spec.


h2. Definition of Terms
h3. Real Time
Current displayed status is the actual status within 60 seconds range.

h3. Current time
è®¡ç®—uptime percentageçš„ä»£ç æ‰§è¡Œçš„æ—¶åˆ»

h3. Today
Day of Current time in UTC+0

h3. Past N Days
ä»Todayä¹‹å‰ï¼ˆä¸åŒ…æ‹¬Todayï¼‰çš„ç¬¬N-1å¤©åˆ°Todayçš„æ—¶é—´åŒºé—´ä¸­çš„æ‰€æœ‰Single Daysã€‚
å‡å¦‚ä»Šå¤©æ˜¯1997å¹´7æœˆ16æ—¥ï¼ŒPast 2 Dayså°±æ˜¯ä»1997å¹´7æœˆ15æ—¥åˆ°1997å¹´7æœˆ16æ—¥çš„æ—¶é—´åŒºé—´ã€‚

h3. Start of Day
1997å¹´7æœˆ16æ—¥çš„Start of Dayä¸ºï¼š
1997-07-16T00:00:00.00+00:00

h3. End of Day
1997å¹´7æœˆ16æ—¥çš„End of Dayä¸ºï¼š
1997-07-16T23:59:59.99+00:00

h3. Single Day
å¯¹äºå·²åˆ°è¾¾End of Dayçš„æŸä¸€å¤©ï¼ŒSingle Dayä¸ºStart of Dayåˆ°End of Dayï¼›
å¯¹äºæœªåˆ°è¾¾End of Dayçš„æŸä¸€å¤©ï¼ŒSingle Dayä¸ºStart of Dayåˆ°Current timeï¼›

h3. Real Time Health Status
ç›‘æ§å¯¹è±¡çš„Real Timeçš„å¥åº·çŠ¶æ€ï¼ŒåŒ…æ‹¬3ç§çŠ¶æ€å€¼ï¼š
- Healthy
- Unhealthy
- Unknown

ä¸åŒç›‘æ§å¯¹è±¡çš„å¥åº·çŠ¶æ€çš„å®šä¹‰ä¸ä¸€æ ·ï¼Œè¦case by caseæ¥çœ‹ã€‚
å¯¹äºThoughtAPIçš„æ¯ä¸€ä¸ªç»„ä»¶ï¼Œ3ç§çŠ¶æ€å€¼çš„å®šä¹‰ä¸ºï¼š
- Healthy: Prometheuså­˜å‚¨çš„å¯¹åº”æ—¶åˆ»çš„ç»„ä»¶çŠ¶æ€ä¸ºHealthy
- Unhealthy: Prometheuså­˜å‚¨çš„å¯¹åº”æ—¶åˆ»çš„ç»„ä»¶çŠ¶æ€ä¸ºUnhealthy
- Unknown: Prometheusæ²¡æœ‰å­˜å‚¨å¯¹åº”æ—¶åˆ»çš„ç»„ä»¶çŠ¶æ€å€¼

å¯¹äºThoughtAPIï¼Œ3ç§çŠ¶æ€å€¼çš„å®šä¹‰ä¸ºï¼š
- Healthy: æ‰€æœ‰ï¼ˆPrometheusä»¥å¤–çš„ï¼‰ç»„ä»¶Real Time Health Statusä¸ºHealthy
- Unhealthy: è‡³å°‘ä¸€ä¸ªç»„ä»¶Real Time Health Statusä¸ºUnhealthyæˆ–Unknown
- Unknown: æ‰€æœ‰ç»„ä»¶Real Time Health Statusä¸ºUnknown

å¯¹äºè¢«ç®¡ç†çš„APIï¼Œ3ç§çŠ¶æ€å€¼çš„å®šä¹‰ä¸ºï¼š
- Healthy: Prometheuså­˜å‚¨çš„å¯¹åº”æ—¶åˆ»çš„APIçŠ¶æ€ä¸ºHealthy
- Unhealthy: Prometheuså­˜å‚¨çš„å¯¹åº”æ—¶åˆ»çš„APIçŠ¶æ€ä¸ºUnhealthy
- Unknown: Prometheusæ²¡æœ‰å­˜å‚¨å¯¹åº”æ—¶åˆ»çš„APIçŠ¶æ€å€¼

h3. Single Day Uptime Percentage
æŸSingle Dayä¸­ï¼Œç›‘æ§å¯¹è±¡è¢«æ£€æŸ¥åˆ°çš„healthçš„æ¬¡æ•° / å¯¹è±¡è¢«æ£€æŸ¥åˆ°çš„healthy + unhealthyçš„æ¬¡æ•°ã€‚
Uptime Percentageæœ‰3ç§å¯èƒ½ï¼š
- Validæ•°å€¼: [0-100]%
- Initial: æ²¡æœ‰åŠ è¿›æ¥
- Unknown: åŠ è¿›æ¥äº†ï¼Œä½†æ˜¯æ²¡æœ‰ä»»ä½•ç›‘æ§æ•°æ®

h3. Past 90 Days Uptime Percentage
Past 90 Daysä¸­ï¼Œç›‘æ§å¯¹è±¡è¢«æ£€æŸ¥åˆ°çš„healthçš„æ¬¡æ•° / å¯¹è±¡è¢«æ£€æŸ¥åˆ°çš„healthy + unhealthyçš„æ¬¡æ•°ã€‚


h2. UI Spec
link: https://preview.uxpin.com/c8d4194e8f4122661829775772b1a94109300243#/pages/94626430/simulate/no-panels?mode=i

h3. Current Health Status

h4. Health Status Icon
æ˜¾ç¤ºç›‘æ§å¯¹è±¡çš„Real Time Health Statuså¯¹åº”çš„é¢œè‰²è§UX Design.

h4. UI Text
{noformat}
API Gateway Status
{noformat}

{noformat}
Current Status
{noformat}

Tooltip
{noformat}
Realtime: [Healthy | Unhealthy | Unknown]
{noformat}

h4. Interaction Behaviours
é¼ æ ‡hoverä¸ŠHealth Status Iconæ—¶æ˜¾ç¤ºTooltipã€‚

h3. Health Status History Graph

h4. Health Status Bar
æ˜¾ç¤ºç›‘æ§å¯¹è±¡æŸä¸€å¤©çš„Single Day Uptime Percentageå¯¹åº”çš„é¢œè‰²è§UX Design.

h4. History Graph
Xè½´ï¼š90ä¸ªHealth Status Barã€‚æ¯ä¸ªHealth Status Barå¯¹åº”å…¶ä¸­ä¸€å¤©çš„Single Day Health Statusã€‚æœ€å·¦ä¾§çš„æ˜¯90å¤©å‰çš„Single Day Health Statusï¼Œæœ€å³ä¾§çš„æ˜¯Todayçš„Single Day Health Statusã€‚

h4. UI Text:
{noformat}
90 days ago
{noformat}

Uptime percentage of Past 90 Days (uptimeä¿ç•™å°æ•°ç‚¹åä¸¤ä½ï¼Œå°æ•°ç‚¹åæœ«ä½0ä¸å±•ç¤º), e.g. 
{noformat}
[99.99]% uptime
{noformat}

{noformat}
Today
{noformat}

Date of Single Day selected (default is Today), e.g. 
{noformat}
2019.01.03 UTC+0
{noformat}

Uptime Percentage of Single Day selected (default is Today,  uptimeä¿ç•™å°æ•°ç‚¹åä¸¤ä½ï¼Œå°æ•°ç‚¹åæœ«ä½0ä¸å±•ç¤º), e.g. 
{noformat}
[99.99]%
{noformat}

h4. Interaction Behaviours
é¼ æ ‡hoverä»»ä½•ä¸€ä¸ªSingle Dayçš„Health Status Baræ—¶ï¼š

1. å¦‚æœhoverçš„Health Status Barå¯¹åº”çš„Single Day Uptime Percentageä¸ºValidæ•°å€¼æ—¶ï¼Œ
Health Status Baræ ·å¼è§UX Design.

å³è¾¹Single Day selectedçš„textå˜ä¸ºï¼š
Date: Date of Single Day selected
Uptime Percentage: Uptime Percentage of Single Day selected

2. å¦‚æœhoverçš„Health Status Barå¯¹åº”çš„Single Day Uptime Percentageä¸ºInitialæ—¶ï¼Œ
Health Status Baræ ·å¼æ— å˜åŒ–ã€‚

å³è¾¹Single Day selectedçš„textæ— å˜åŒ–ã€‚

3. å¦‚æœhoverçš„Health Status Barå¯¹åº”çš„Single Day Uptime Percentageä¸ºUnknownæ—¶ï¼Œ
Health Status Baræ ·å¼è§UX Design.

å³è¾¹Single Day selectedçš„textå˜ä¸ºï¼š
Date:
{noformat}
[Date of Single Day selected]
{noformat}

Uptime Percentage:
{noformat}
Unknown
{noformat}

h2. Technical Requirements:
all time related calculation in any metrics are based on UTC time
check APIGW/API health statusçš„æ—¶é—´é—´éš”ï¼š30s
Serverç«¯: å¯ä»¥è®¾ç½®ä¸åŒçš„æ—¶é—´çª—ï¼Œæœ€å¤šå¯æä¾›ä»æœ‰æ•°æ®æ—¥æœŸå¼€å§‹åˆ°ä»Šå¤©çš„æ‰€æœ‰æ•°æ®ï¼Œç»ˆæ­¢æ—¥æœŸä¹Ÿå¯ä»¥ä¸æ˜¯ä»Šå¤©ï¼Œå¯ä»¥æ˜¯ä»»ä½•æ—¥æœŸã€‚ï¼Œæä¾›ä¸åŒæ—¶é—´çš„uptimeè®¡ç®—

h2. Test Scenario
</code></pre></div></div>
:ET