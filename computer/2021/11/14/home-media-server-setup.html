<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>家庭娱乐服务器setup | 开放笔记</title>
<meta name="generator" content="Jekyll v4.3.2" />
<meta property="og:title" content="家庭娱乐服务器setup" />
<meta name="author" content="徐顺发" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Media Server" />
<meta property="og:description" content="Media Server" />
<link rel="canonical" href="https://goooooouwa.github.io/computer/2021/11/14/home-media-server-setup.html" />
<meta property="og:url" content="https://goooooouwa.github.io/computer/2021/11/14/home-media-server-setup.html" />
<meta property="og:site_name" content="开放笔记" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-11-14T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="家庭娱乐服务器setup" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"徐顺发"},"dateModified":"2021-11-14T00:00:00+00:00","datePublished":"2021-11-14T00:00:00+00:00","description":"Media Server","headline":"家庭娱乐服务器setup","mainEntityOfPage":{"@type":"WebPage","@id":"https://goooooouwa.github.io/computer/2021/11/14/home-media-server-setup.html"},"url":"https://goooooouwa.github.io/computer/2021/11/14/home-media-server-setup.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://goooooouwa.github.io/feed.xml" title="开放笔记" /><script async src="https://www.googletagmanager.com/gtag/js?id=G-669F0VG7BL"></script>
<script>
  window['ga-disable-G-669F0VG7BL'] = window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1";
  window.dataLayer = window.dataLayer || [];
  function gtag(){window.dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-669F0VG7BL');
</script>
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<link rel="shortcut icon" href="/favicon.ico">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="/browserconfig.xml">
<meta name="theme-color" content="#ffffff">
<link rel="stylesheet" href="/assets/css/google-custom-search-style-fix.css">
<script data-ad-client="ca-pub-6847741633817418" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script src=/assets/javascript/chartjs-2.9.3/chart.min.js></script>
<script src=/assets/javascript/mermaid-8.7.0/mermaid.min.js></script></head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">开放笔记</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/categories.html">分类</a><a class="page-link" href="/tags.html">标签</a><a class="page-link" href="/wiki.html">Wiki</a><a class="page-link" href="/docs.html">共享文档</a><a class="page-link" href="/about/">关于作者</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">家庭娱乐服务器setup</h1>
    <p class="post-meta"><time class="dt-published" datetime="2021-11-14T00:00:00+00:00" itemprop="datePublished">
        Nov 14, 2021
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <h2 id="media-server">Media Server</h2>

<h3 id="hardware">Hardware</h3>

<p>Raspberry Pi 3B + USB hard disk</p>

<h3 id="software">Software</h3>

<ol>
  <li>HTTP file server: nginx</li>
  <li>Photo gallery: pigallery2 + nginx (tried piwigo, too slow and heavy for Pi)</li>
  <li>File remote access: smb-&gt;sftp (tried Merlin router built in SMB, not doesn’t support ExFAT disk format)</li>
  <li>Media server: Plex (tried smb, pro is mobile friendly, con is UI not friendly)</li>
  <li>Download server: qBittorrent (tried</li>
  <li>Transmission, no global trackers)</li>
  <li>NAS: omv 5 (SMART, monitoring, not so many useful plugins)</li>
  <li>DNS Ad blocker: AdGuard home (tried Pihole, UI not as intuitive; tried Diversion, broken for Merlin 386.3; overall DNS ad blocking is not so effective)</li>
</ol>

<h4 id="usb-hard-disk-auto-idling">USB hard disk auto idling</h4>

<p>hd-idle (tried hdparam, not working for USB disks)</p>

<h3 id="overall-experience">Overall experience</h3>

<p>Pros:</p>

<ol>
  <li>Always on</li>
  <li>low power consumption</li>
  <li>不占桌面空间</li>
</ol>

<p>Cons:</p>

<ol>
  <li>Weak compute power</li>
  <li>No UPS auto shutdown (For now, if power down, sd card in Pi is possible to crupt, but since external USB is mostly idle, usually not write activities, should be fine if shutdown.)</li>
</ol>

<p>ARM-based Mini Linux PC is the ideal home server. Merlin router is mostly good at 科学上网，其他网络应用要求更好的性能和存储空间以及更好的软件支持，最好用其他服务器（RPi or HTPC)。</p>

<h2 id="game-streaming-server">Game streaming server</h2>

<h3 id="hardware-1">Hardware</h3>

<p>Steamlink + Gaming laptop + Xbox one OG controller with wireless adapter</p>

<h3 id="software-1">Software</h3>

<p>Steam</p>

<h4 id="wake-on-lan">Wake on lan</h4>

<ol>
  <li>Replace dead battery</li>
  <li>Upgrade BIOS to support s5 (shutdown) wake on lan</li>
</ol>

<h4 id="xbox-one-og-controller-with-wireless-adapter">Xbox one OG controller with wireless adapter</h4>

<p>As xow is already bundled with steamlink, it should work. Caveats:</p>

<ol>
  <li>xow doesn’t support pairing, need to pair on pc before using on steamlink</li>
  <li>VirtualHere conflicts with xow, need to stop sharing adapter in virtualHere</li>
</ol>

<h5 id="steps-to-connect-xbox-one-og-controller-with-wireless-adapter">Steps to connect XBox one OG controller with wireless adapter:</h5>

<ol>
  <li>Stream games on PC</li>
  <li>Connect wireless adapter on pc</li>
  <li>Pair with Xbox one OG controller</li>
  <li>Unplug the wireless adapter</li>
  <li>Plug in to steamlink</li>
  <li>Unplug power to shutdown steamlink</li>
  <li>Reconnect power to boot steamlink</li>
  <li>Once booted, press button on wireless adapter and Xbox one controller sync button (the one on the side), should both light up and connected</li>
  <li>Next time just press button on wireless adapter and the wake button(with logo) on Xbox one controller, should reconnect pretty fast.</li>
</ol>

<h2 id="previous-home-media-server">Previous home media server</h2>

<h3 id="hardware-2">Hardware</h3>

<p>old MacBook Pro + Ethernet adapter</p>

<h3 id="software-2">Software</h3>

<ol>
  <li>Photo management: PhotoPrism (tried PhotoStructure, also good, though not as easy and powerful as PhotoPrism)</li>
  <li>Download server: 迅雷</li>
</ol>

<h4 id="wake-on-lan-macbook-pro-only-support-ethernet-wake-on-lan-when-lid-closed">Wake on Lan (MacBook pro only support Ethernet wake on lan when lid closed)</h4>

<ol>
  <li>Ethernet adapter</li>
  <li>forward Port 9</li>
  <li>Turn on Caffeine (to Keep Mac awake)</li>
</ol>

<h3 id="overall-experience-1">Overall experience</h3>

<p>Pros:</p>

<ol>
  <li>Powerful hardware</li>
  <li>Support PhotoPrism (4g ram)</li>
  <li>迅雷下载速度快</li>
</ol>

<p>Cons:</p>

<ol>
  <li>占桌面位置</li>
  <li>Not always on (need to Wake on Lan first to save power)</li>
</ol>

<h2 id="future-upgrade-considerations">Future upgrade considerations</h2>

<h3 id="server">Server</h3>

<p>Mini PC with UPS and more powerful hardware, probably with large internal storage (SSD &amp; 2.5 hard disk)</p>

<h3 id="storage">Storage</h3>

<p>Hard disk or external hard disk? Both SATA interface, should work the same, right? Except external is easier to break.</p>

  </div>

  <!-- <div class="reward">
    <p>觉得文章对你有帮助？打赏以支持作者持续创作：</p>
    <div class="reward-button">
      <span class="alipay-code"><img class="alipay-img wdp-appear" alt="支付宝打赏" src="https://goooooouwa.eu.org:8143/static/images/alipay_paycode.jpg"></span>
    </div>
  </div> --><script src="https://utteranc.es/client.js" repo="goooooouwa/goooooouwa.github.io" issue-term="pathname"
    theme="github-light" crossorigin="anonymous" async>
    </script>

  <a class="u-url" href="/computer/2021/11/14/home-media-server-setup.html" hidden></a>
</article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>订阅</span>
          </a>
        </p>
        <ul class="contact-list">
          <li class="p-name">徐顺发</li>
          <li><a class="u-email" href="mailto:gouwa5700 (at) gmail (dot) com">gouwa5700 (at) gmail (dot) com</a></li>
        </ul>
      </div>
      <div class="footer-col">
        <p>记录生活、学习和思考
</p>
        <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/"><img alt="知识共享许可协议" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/4.0/88x31.png" /></a><br />本网站采用<a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a>进行许可。
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li>
  <a rel="me" href="https://github.com/goooooouwa" target="_blank" title="github">
    <svg class="svg-icon grey">
      <use xlink:href="/assets/minima-social-icons.svg#github"></use>
    </svg>
  </a>
</li>
<li>
  <a rel="me" href="https://twitter.com/Goooooouwa" target="_blank" title="twitter">
    <svg class="svg-icon grey">
      <use xlink:href="/assets/minima-social-icons.svg#twitter"></use>
    </svg>
  </a>
</li>
</ul>
</div>

  </div>

</footer>
</body>

</html>